/ Mobile: single column, Desktop: 2/3 + 1/3
.grid.lg:grid-cols-3.gap-4.sm:gap-8
  / Main form
  .lg:col-span-2
    = form_with model: @recipe, class: "space-y-4 sm:space-y-6" do |f|
      - if @recipe.errors.any?
        .card.bg-red-50.border-red-200.p-4.sm:p-6.mb-4.sm:mb-6
          .flex.items-start.gap-3.sm:gap-4
            .w-8.h-8.sm:w-10.sm:h-10.bg-red-100.rounded-xl.flex.items-center.justify-center.text-red-500.flex-shrink-0
              span âš ï¸
            div
              h3.font-semibold.text-red-800.mb-1.sm:mb-2.text-sm.sm:text-base
                = "#{@recipe.errors.count} erreur(s)"
              ul.text-xs.sm:text-sm.text-red-600.space-y-1
                - @recipe.errors.full_messages.each do |message|
                  li = message

      .card.p-4.sm:p-8.space-y-4.sm:space-y-6
        h2.text-lg.sm:text-xl.font-display.font-bold.text-navy.flex.items-center.gap-2.sm:gap-3.mb-1.sm:mb-2
          span ğŸ“
          | Informations

        .space-y-4.sm:space-y-5
          .form-group
            = f.label :title, class: "form-label text-sm sm:text-base"
              span Titre de la recette
              span.text-terracotta.ml-1 *
            = f.text_field :title, required: true, class: "form-input text-base", placeholder: "Ex: Poulet rÃ´ti aux herbes"

          .form-group
            = f.label :preparation_time, class: "form-label text-sm sm:text-base"
              | Temps de prÃ©paration (min)
            .relative
              = f.number_field :preparation_time, min: 0, class: "form-input pl-10 sm:pl-12 text-base", placeholder: "30"
              .absolute.left-3.sm:left-4.top-1/2.-translate-y-1/2.text-navy/40
                | â±ï¸

          .form-group.flex.items-center.gap-3.p-3.sm:p-4.bg-cream/50.rounded-xl
            = f.check_box :is_favorite, class: "w-5 h-5 rounded border-2 border-cream-dark text-terracotta focus:ring-terracotta"
            = f.label :is_favorite, class: "text-navy font-medium cursor-pointer text-sm sm:text-base"
              span.mr-2 â­
              | Marquer comme favori

      .card.p-4.sm:p-8.space-y-4.sm:space-y-6
        h2.text-lg.sm:text-xl.font-display.font-bold.text-navy.flex.items-center.gap-2.sm:gap-3.mb-1.sm:mb-2
          span ğŸ¥•
          | IngrÃ©dients

        .form-group
          = f.label :ingredients_text, class: "form-label text-sm sm:text-base"
            span Liste des ingrÃ©dients
            span.text-terracotta.ml-1 *
          = f.text_area :ingredients_text, value: @recipe.ingredients_text, rows: 6, class: "form-input font-mono text-sm sm:text-base", placeholder: "200 g farine\n3 Å“ufs\n100 ml lait\nsel"
          p.text-xs.sm:text-sm.text-navy/50.mt-2.flex.items-center.gap-2
            span ğŸ’¡
            | Format : quantitÃ© unitÃ© ingrÃ©dient (ex: 200 g farine)

      .card.p-4.sm:p-8.space-y-4.sm:space-y-6
        h2.text-lg.sm:text-xl.font-display.font-bold.text-navy.flex.items-center.gap-2.sm:gap-3.mb-1.sm:mb-2
          span ğŸ‘¨â€ğŸ³
          | PrÃ©paration

        .form-group
          = f.label :steps, class: "form-label text-sm sm:text-base"
            span Instructions
            span.text-terracotta.ml-1 *
          = f.text_area :steps, value: @recipe.steps.join("\n"), rows: 8, class: "form-input font-mono text-sm sm:text-base", placeholder: "PrÃ©chauffer le four Ã  180Â°C\nMÃ©langer la farine et les Å“ufs\n..."
          p.text-xs.sm:text-sm.text-navy/50.mt-2.flex.items-center.gap-2
            span ğŸ’¡
            | Une Ã©tape par ligne

      / Actions
      .grid.grid-cols-2.sm:flex.sm:flex-row.gap-3.sm:gap-4.pt-2.sm:pt-4
        = f.submit class: "btn btn-primary col-span-2 sm:flex-none justify-center"
        = link_to "Annuler", (@recipe.persisted? ? recipe_path(@recipe) : recipes_path), class: "btn btn-outline col-span-2 sm:col-span-1 justify-center"

  / Sidebar tips (hidden on mobile)
  .hidden.lg:block.space-y-6
    .card.p-6.bg-gradient-to-br.from-sage/10.to-sage/5
      .flex.items-center.gap-3.mb-4
        .w-10.h-10.bg-sage/20.rounded-xl.flex.items-center.justify-center
          span ğŸ’¡
        h3.font-semibold.text-navy Conseils

      ul.space-y-3.text-sm.text-navy/70
        li.flex.items-start.gap-2
          span.text-sage âœ“
          span Soyez prÃ©cis dans les quantitÃ©s
        li.flex.items-start.gap-2
          span.text-sage âœ“
          span DÃ©crivez chaque Ã©tape clairement
        li.flex.items-start.gap-2
          span.text-sage âœ“
          span Ajoutez le temps de prÃ©paration

    .card.p-6
      .flex.items-center.gap-3.mb-4
        .w-10.h-10.bg-mustard/30.rounded-xl.flex.items-center.justify-center
          span ğŸ“Š
        h3.font-semibold.text-navy AperÃ§u

      .space-y-3.text-sm
        .flex.justify-between.items-center.py-2.border-b.border-cream-dark
          span.text-navy/60 IngrÃ©dients
          span#ingredients-count.font-medium.text-navy = @recipe.ingredients.count
        .flex.justify-between.items-center.py-2
          span.text-navy/60 Ã‰tapes
          span#steps-count.font-medium.text-navy = @recipe.steps.size
