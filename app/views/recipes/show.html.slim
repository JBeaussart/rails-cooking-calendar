/ Mobile back button
.sm:hidden.mb-4
  = link_to recipes_path, class: "inline-flex items-center gap-2 text-sm text-navy/70 hover:text-terracotta transition-colors"
    span â†
    span Recettes

/ Breadcrumb (tablet+)
.hidden.sm:flex.items-center.gap-2.text-sm.text-navy/60.mb-6
  = link_to "Recettes", recipes_path, class: "hover:text-terracotta transition-colors"
  span /
  span.text-navy.truncate.max-w-48 = @recipe.title

/ Mobile: stacked, Desktop: 2/3 + 1/3
.grid.lg:grid-cols-3.gap-4.sm:gap-8

  / Main content
  .lg:col-span-2.space-y-4.sm:space-y-8
    / Header card
    .card.overflow-hidden
      .bg-gradient-to-br.from-terracotta.to-terracotta-dark.p-4.sm:p-8.text-white
        .flex.items-start.justify-between.gap-3.sm:gap-4
          div.flex-1.min-w-0
            h1.font-display.font-bold.text-xl.sm:text-3xl.md:text-4xl.mb-3.sm:mb-4.line-clamp-3 = @recipe.title
            .flex.flex-wrap.gap-2.sm:gap-3
              - if @recipe.preparation_time
                .badge.bg-white/20.text-white.text-xs.sm:text-sm
                  span.mr-1 â±ï¸
                  | #{@recipe.preparation_time} min
              .badge.bg-white/20.text-white.text-xs.sm:text-sm
                span.mr-1 ğŸ¥•
                | #{@recipe.ingredients.size} ingr.
              .badge.bg-white/20.text-white.text-xs.sm:text-sm
                span.mr-1 ğŸ“
                | #{@recipe.steps.size} Ã©tapes

          / Favorite button
          = link_to toggle_favorite_recipe_path(@recipe), data: { turbo_method: :patch }, class: "flex-shrink-0 w-10 h-10 sm:w-14 sm:h-14 rounded-xl sm:rounded-2xl flex items-center justify-center transition-all duration-200 #{@recipe.is_favorite? ? 'bg-white text-terracotta shadow-lg' : 'bg-white/20 text-white hover:bg-white/30'}"
            span.text-lg.sm:text-2xl = @recipe.is_favorite? ? 'â˜…' : 'â˜†'

    / Ingredients
    .card.p-4.sm:p-8
      h2.text-lg.sm:text-xl.font-display.font-bold.text-navy.flex.items-center.gap-2.sm:gap-3.mb-4.sm:mb-6
        .w-8.h-8.sm:w-10.sm:h-10.bg-sage/20.rounded-xl.flex.items-center.justify-center
          span ğŸ¥•
        | IngrÃ©dients

      ul.grid.grid-cols-1.sm:grid-cols-2.gap-2.sm:gap-3
        - @recipe.ingredients.each do |ingredient|
          li.flex.items-center.gap-2.sm:gap-3.p-2.sm:p-3.bg-cream/50.rounded-lg.sm:rounded-xl.hover:bg-cream.transition-colors
            .w-5.h-5.sm:w-6.sm:h-6.bg-sage.rounded-full.flex.items-center.justify-center.text-white.text-xs.flex-shrink-0 âœ“
            span.text-navy.text-sm.sm:text-base = ingredient

    / Steps
    .card.p-4.sm:p-8
      h2.text-lg.sm:text-xl.font-display.font-bold.text-navy.flex.items-center.gap-2.sm:gap-3.mb-4.sm:mb-6
        .w-8.h-8.sm:w-10.sm:h-10.bg-mustard/30.rounded-xl.flex.items-center.justify-center
          span ğŸ“
        | PrÃ©paration

      ol.space-y-3.sm:space-y-4
        - @recipe.steps.each_with_index do |step, index|
          li.flex.gap-3.sm:gap-4.p-3.sm:p-4.bg-cream/50.rounded-lg.sm:rounded-xl.hover:bg-cream.transition-colors
            .flex-shrink-0.w-8.h-8.sm:w-10.sm:h-10.bg-terracotta.rounded-lg.sm:rounded-xl.flex.items-center.justify-center.text-white.font-bold.text-sm.sm:text-base
              = index + 1
            p.text-navy.pt-1.sm:pt-2.text-sm.sm:text-base = step

  / Sidebar
  .space-y-4.sm:space-y-6
    / Actions card
    .card.p-4.sm:p-6
      h3.font-semibold.text-navy.mb-3.sm:mb-4.text-sm.sm:text-base Actions
      .grid.grid-cols-2.lg:grid-cols-1.gap-2.sm:gap-3
        = link_to edit_recipe_path(@recipe), class: "btn btn-primary justify-center text-sm sm:text-base"
          span âœï¸
          span Modifier
        = link_to new_meal_plan_path(recipe_id: @recipe.id), class: "btn btn-secondary justify-center text-sm sm:text-base"
          span ğŸ“…
          span Planifier
        = link_to recipe_path(@recipe), data: { turbo_method: :delete, turbo_confirm: "Supprimer cette recette ?" }, class: "btn btn-danger justify-center col-span-2 lg:col-span-1 text-sm sm:text-base"
          span ğŸ—‘ï¸
          span Supprimer

    / Info card (hidden on mobile to save space)
    .hidden.sm:block.card.p-6.bg-gradient-to-br.from-cream.to-white
      h3.font-semibold.text-navy.mb-4 Informations
      .space-y-3.text-sm
        .flex.justify-between.items-center.py-2.border-b.border-cream-dark
          span.text-navy/60 CrÃ©Ã©e le
          span.font-medium.text-navy = l(@recipe.created_at, format: :long)
        .flex.justify-between.items-center.py-2.border-b.border-cream-dark
          span.text-navy/60 ModifiÃ©e le
          span.font-medium.text-navy = l(@recipe.updated_at, format: :long)
        .flex.justify-between.items-center.py-2
          span.text-navy/60 Statut
          - if @recipe.is_favorite?
            span.badge.badge-terracotta â­ Favori
          - else
            span.text-navy/50 Normal

    / Back link
    = link_to recipes_path, class: "btn btn-outline w-full justify-center text-sm sm:text-base"
      span â†
      span Retour
