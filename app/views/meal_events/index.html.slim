/ Header
.flex.flex-col.sm:flex-row.sm:items-center.sm:justify-between.gap-4.sm:gap-6.mb-6.sm:mb-8
  div
    h1.text-2xl.sm:text-3xl.lg:text-4xl.font-display.font-bold.text-navy.flex.items-center.gap-2.sm:gap-3
      span.text-xl.sm:text-2xl ğŸ‰
      | Mes Ã©vÃ©nements
    p.text-navy/60.mt-1.sm:mt-2.text-sm.sm:text-base Organisez vos repas de fÃªte

  = link_to new_meal_event_path, class: "btn btn-primary w-full sm:w-auto justify-center"
    span âœ¨
    span Nouvel Ã©vÃ©nement

/ Events
- if @meal_events.any?
  / Upcoming events
  - upcoming = @meal_events.where("date >= ?", Date.today)
  - past = @meal_events.where("date < ?", Date.today)

  - if upcoming.any?
    .mb-8.sm:mb-12
      h2.text-lg.sm:text-xl.font-display.font-bold.text-navy.flex.items-center.gap-2.sm:gap-3.mb-4.sm:mb-6
        .w-6.h-6.sm:w-8.sm:h-8.bg-sage/20.rounded-lg.flex.items-center.justify-center.text-sage
          span ğŸ“…
        | Ã€ venir

      / Mobile: 1 col, Tablet: 2 cols, Desktop: 3 cols
      .grid.grid-cols-1.sm:grid-cols-2.lg:grid-cols-3.gap-4.sm:gap-6
        - upcoming.each do |event|
          .card.card-hover.overflow-hidden.group
            / Date badge
            .bg-gradient-to-br.from-terracotta.to-terracotta-dark.p-4.sm:p-6.text-white.relative
              .absolute.top-2.right-2.sm:top-4.sm:right-4.opacity-20.text-4xl.sm:text-6xl ğŸ‰
              .relative
                .text-xs.sm:text-sm.font-medium.uppercase.tracking-wide.opacity-80
                  = l(event.date, format: "%A")
                .text-3xl.sm:text-4xl.font-display.font-bold
                  = event.date.day
                .text-sm.sm:text-lg
                  = l(event.date, format: "%B %Y")

            .p-4.sm:p-6
              h3.font-display.font-bold.text-lg.sm:text-xl.text-navy.group-hover:text-terracotta.transition-colors.mb-2.sm:mb-3.line-clamp-2
                = link_to event.title, meal_event_path(event)

              - if event.guests_count
                .flex.items-center.gap-2.text-navy/70.text-sm.mb-3.sm:mb-4
                  span ğŸ‘¥
                  span.font-medium
                    = event.guests_count
                    |  invitÃ©(s)

              / Countdown
              - days_until = (event.date - Date.today).to_i
              .p-2.sm:p-3.bg-cream/50.rounded-lg.sm:rounded-xl.text-center.mb-3.sm:mb-4
                - if days_until == 0
                  span.font-bold.text-terracotta.text-sm.sm:text-base C'est aujourd'hui ! ğŸŠ
                - elsif days_until == 1
                  span.text-navy/70.text-sm.sm:text-base C'est 
                  span.font-bold.text-terracotta demain
                  |  !
                - else
                  span.text-navy/70.text-sm.sm:text-base Dans 
                  span.font-bold.text-terracotta = days_until
                  |  jours

              .flex.gap-2
                = link_to meal_event_path(event), class: "btn btn-sm btn-outline flex-1 text-xs sm:text-sm justify-center"
                  | Voir
                = link_to edit_meal_event_path(event), class: "btn btn-sm btn-ghost px-2 sm:px-3"
                  | âœï¸
                = link_to meal_event_path(event), data: { turbo_method: :delete, turbo_confirm: "Supprimer cet Ã©vÃ©nement ?" }, class: "btn btn-sm btn-ghost text-red-500 hover:bg-red-50 px-2 sm:px-3"
                  | ğŸ—‘ï¸

  - if past.any?
    div
      h2.text-lg.sm:text-xl.font-display.font-bold.text-navy/50.flex.items-center.gap-2.sm:gap-3.mb-4.sm:mb-6
        .w-6.h-6.sm:w-8.sm:h-8.bg-navy/10.rounded-lg.flex.items-center.justify-center.text-navy/50
          span ğŸ“œ
        | PassÃ©s

      .grid.grid-cols-1.sm:grid-cols-2.lg:grid-cols-3.gap-3.sm:gap-6.opacity-60
        - past.limit(6).each do |event|
          .card.p-4.sm:p-6
            .flex.items-start.gap-3.sm:gap-4
              .w-12.h-12.sm:w-14.sm:h-14.bg-cream.rounded-lg.sm:rounded-xl.flex.flex-col.items-center.justify-center.text-navy/50.flex-shrink-0
                .text-xs.uppercase = l(event.date, format: "%b")
                .font-bold = event.date.day
              div.min-w-0
                h3.font-semibold.text-navy/70.mb-1.text-sm.sm:text-base.truncate = event.title
                p.text-xs.sm:text-sm.text-navy/50 = l(event.date, format: :long)
                - if event.guests_count
                  p.text-xs.sm:text-sm.text-navy/50
                    | ğŸ‘¥ #{event.guests_count} invitÃ©(s)

- else
  .card.p-8.sm:p-12
    .text-center
      .text-5xl.sm:text-7xl.mb-4.sm:mb-6 ğŸ‰
      h2.text-xl.sm:text-2xl.font-display.font-bold.text-navy.mb-2.sm:mb-3 Aucun Ã©vÃ©nement prÃ©vu
      p.text-navy/60.mb-6.sm:mb-8.max-w-md.mx-auto.text-sm.sm:text-base
        | CrÃ©ez des Ã©vÃ©nements pour organiser vos repas de fÃªte, anniversaires, ou dÃ®ners entre amis !
      = link_to new_meal_event_path, class: "btn btn-primary w-full sm:w-auto"
        span âœ¨
        span CrÃ©er mon premier Ã©vÃ©nement
